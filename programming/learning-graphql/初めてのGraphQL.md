初めてのGraphQL Webサービスを作って学ぶ新世代API
===

1章 GraphQLへようこそ
---
### 1.1 GraphQLとは
- GraphQLとはAPIのための問い合わせ言語です
- 通信プロトコルは指定していないが、一般的にはHTTPプロトコルが用いられる
- GraphQLとはクラサバのための言語仕様。ECMAScriptみたいなもの。graphql.jsだけGraphQL開発チームが作った

### 1.2 GraphQLの誕生
- 2012年、Facebookがモバイルアプリの作り直しように作ったクエリ言語
- 2015年、言語仕様を公開。graphql.jsを公開

### 1.3 データ通信の歴史
RPC → SOAP → REST → RESTつらいみたいな話

### 1.4 RESTの課題
GraphQLでたとき「RESTの時代は終わりだ」みたいな話が出たけど行き過ぎ。
Webの発達により、RESTが適合しない状況が生まれてきている。
- 過剰な取得
- 過少な取得
- エンドポイント増えすぎ問題

### 1.5 GraphQLの実情
- クライアント側でよく使われているのはRelay(FaceBokk)とApollo(Meteorコミュニティ).

2章 グラフ理論
---
### 2.1 グラフ理論の用語
- ノード(node), 頂点(vertex): データ
- エッジ(edge): コネクション
- 無向グラフ：ノードの関係に階層構造や方向がないグラフ
- 有向グラフ：エッジが線ではなく矢印で、ノード間に流れ、向きがあるグラフ

### 2.2 グラフ理論の歴史
オイラーのケーニヒスベルクの橋が原点

### 2.3 木というグラフ
木構造の話（唐突）
GraphQLのQueryのデータ構造が木構造になってるから？

### 2.4 実世界でのグラフ
- Facebookの友達は無向グラフ
- Twitterのフォローフォロワーは有向グラフ
- Facebookの友人関係は木構造

3章 GraphQLの問い合わせ言語
---
- GraphQLはSQLの考え方をインターネットに適応したもの。どちらもQueryLanguage(問い合わせ言語)
- GraphQLではSQLのSELECTの代わりに**Query**をデータの取得に利用する
- GraphQLではSQLのINSERT,UPDATE,DELETEの代わりに**Mutation**という単一のコマンドを使用する
- ソケット通信を使ってデータの変更を監視する**Subscription**というコマンドも用意されている
- クエリはただの文字列なのでHTTP POSTリクエストのボディに詰め込んで送信できる

### 3.1 GraphQL APIの便利なツール
- GraphiQL
- GraphQL Playground

### 3.2 GraphQLのクエリ
- **query**オペレーションを使用しAPIからデータを取得できる
- 取得したいデータは**field**で指定する
- オペレーションは1つしかおくれない。1回のリクエストで両方のデータが欲しい時は一つのクエリで書く必要がある。
- QueryはGraphQLの型の一つで**ルート型**
- ルート型はオペレーションに対するGraphQLの方で、入れ子になっているクエリのドキュメントの一番上位には必ずルート型が指定される
- GraphQL APIでクエリできるフィールドはAPIのスキーマで定義されている
- クエリを作成する時は必要なフィールドを波かっこで囲んで指定する。波かっこで囲まれたブロックは**選択セット**と呼ばれる。
- エイリアスを指定することでJSONレスポンスのフィールド名を任意のものに置き換えることができる
- GraphQLのクエリで結果をフィルタリングしたい時は**クエリ引数**を利用する

``` graphql
↓ query
query liftsAndTrails {
    open ←エイリアス: liftCount(status: OPEN ←クエリ引数)
    allLifts { ←選択セット
        name ←field
        status
    }
    allTrails {
        name
        difficulty
    }
}
```

#### 3.2.1 エッジと接続

- GraphQLには**スカラー型**と**オブジェクト型** が存在する
  - スカラ型はプリミティブ型に近い概念。選択セットに対しては葉の要素にあたる
  - 整数型(Int), 不動小数点型(Float), 文字列型(String), 論理型(Boolean), ID型(ID)の5つがある
  - Int,FloatはJSONでnumber, StringとIDはstringを返す。IDはGraphQLの使用上ユニークでなければならない。
  - オブジェクト型は一つ以上のスキーマで定義されているフィールドの集合


### 3.3 ミューテーション
### 3.4 サブスクリプション
### 3.5 イントロスペクション
### 3.6 抽象構文木

4章 スキーマの設計
---
### 4.1 型定義
### 4.2 コネクションとリスト
### 4.3 引数
### 4.4 ミューテーション
### 4.5 入力型
### 4.6 返却型
### 4.7 サブスクリプション
### 4.8 スキーマのドキュメント化

5章 GraphQLサーバーの実装
---
### 5.1 プロジェクトのセットアップ
### 5.2 リゾルバ
### 5.3 apollo-server-express
### 5.4 コンテキスト
### 5.5 GitHub認可
### 5.6 まとめ

6章 GraphQLクライアントの実装
---
### 6.1 GraphQL APIの利用
### 6.2 Apollo Client
### 6.3 Apollo ClientとReact
### 6.4 認可
### 6.5 キャッシュ

7章 GraphQLの実戦投入にあたって
---
### 7.1 サブスクリプション
### 7.2 ファイルアップロード
### 7.3 セキュリティ
### 7.4 次の段階にすすむ
